---
import { Image } from 'astro:assets';
import { getEntryBySlug } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
// import MarkdownPage from '../../layouts/MarkdownPage.astro';
import ProjectLayout from '../../layouts/ProjectLayout.astro';

interface Props {
  post: CollectionEntry<'projects'>;
}
const { slug } = Astro.params;
const entry = await getEntryBySlug('projects', slug!);
const { image, date, summary } = entry!.data;
const feature = await import(/* @vite-ignore */`../../assets/images/${image!.src}.webp`);
const { Content } = await entry!.render();
---

<ProjectLayout data={entry!.data}>
  <time>{date.toLocaleDateString('en-US', {weekday: 'long', month: 'long', day: 'numeric', year: 'numeric'})}</time>
  <!--<img src={feature.default.src} alt={image.alt} width={feature.default.width} height={feature.default.height}>-->
  <Image src={feature.default} alt={image!.alt} class="feature"/>
  <Content />
</ProjectLayout>

<style>
  img {
    object-fit: cover;
    height: auto;
  }

  feature {
    aspect-ratio: 16 / 9;
  }
</style>
